<app-modal [visible]="true">
  <h2>Welcome to Paledit!</h2>
  <p>This is an early release.</p>
  <p><a href="https://forum.zdoom.org/viewtopic.php?f=44&t=61131">ZDoom forums thread</a></p>
  <p><a href="https://github.com/Talon1024/paledit">GitHub repository</a></p>
</app-modal>

<app-modal [(visible)]="loadVisible" [closeable]="false"><img src="assets/loading.svg" alt="Loading" class="loading"> Loading...</app-modal>

<div class="editor-main">
  <div class="editor-col">
    <app-palette-loader></app-palette-loader>
    <app-message-log></app-message-log>
    <app-selected-colour></app-selected-colour>
    <span class="button" (click)="helpVisible=true">Help!</span>
  </div>
  <div class="editor-col">
    <app-palette-view [multiple]="true"></app-palette-view>
  </div>
  <div class="editor-col">
    <app-palette-navigator></app-palette-navigator>
    <app-palette-operations></app-palette-operations>
  </div>
</div>
<app-gradient-editor></app-gradient-editor>
<a class="button" [download]="palFileName" (click)="savePalette()" [href]="palDataURI" i18n="Save palette to a file">Save Palette</a>
<!-- <a class="button" [download]="cmapFileName" [href]="cmapDataURI" i18n="Save colourmap to a file">Save Colourmap</a> -->

<app-modal [(visible)]="helpVisible">
  <h2>Using Paledit</h2>
  <p>Drag and drop a palette file onto the palette loader, or select a palette file from within your browser to load it.</p>
  <p>Paledit can read raw palette files, as well as Doom WADs.</p>
  <h3>Colour selection</h3>
  <p>The colour below your mouse will have a flashing border.</p>
  <p>Selected colours will pulsate.</p>
  <p>Click on a colour in the palette to select it, and deselect all other colours.</p>
  <p>Ctrl-click on a colour to select it if it is not already selected, or to deselect it if it is selected.</p>
  <p>Shift-click on a colour to select or deselect all of the colours between the last selected colour and the colour you click on, depending on whether they are already selected or not.</p>
  <p>Every <i>x</i>th colour, where <i>x</i> is the given interval, can be selected if you hold down Ctrl and Shift at the same time while clicking on a colour.</p>
  <h3>Palette navigation</h3>
  <p>PLAYPAL files can contain many different palettes. Use the palette navigator to switch between them.</p>
  <p>Controls:</p>
  <ul>
    <li>&#xAB; First palette</li>
    <li>&#x2039; Previous palette</li>
    <li>- Remove palette</li>
    <li>+ Add palette</li>
    <li>&#x203A; Next palette</li>
    <li>&#xBB; Last palette</li>
  </ul>
  <p>Entering a number into the palette number box will go to that palette.</p>
  <h3>Palette operations</h3>
  <p>Operations are applied to the selected colours, or the entire palette if no colours are selected.</p>
  <p><i>Reverse</i> flips the order of the selected colours.</p>
  <p><i>Tint</i> blends the selected colours with the specified colour by the specified factor as a percentage.</p>
  <p><i>Colourize</i> sets the hue, saturation, and/or value of the selected colours to that of the specified colour.</p>
  <p><i>Saturate</i> increases or decreases the saturation of the selected colours.</p>
  <p><i>Shift hue</i> changes the hue of the selected colours by the specified amount of degrees.</p>
  <p><i>Copy Selection</i> will copy the currently selected colours to Paledit's clipboard.</p>
  <p><i>Paste</i> will paste the copied colours to the original positions they were copied from.</p>
  <p><i>Use red channel from gradient as factor</i> will use the red channel of the colours from the gradient to control the above operations, except for copy, paste, and reverse. That way, for example, you can shift the hue of a range of colours incrementally as opposed to applying the full shift to all of them.</p>
  <h3>Gradient editing</h3>
  <p>Use the gradient editor to edit gradients which you can apply to your palette.</p>
  <p>Controls:</p>
  <ul>
    <li>+ Add stop</li>
    <li>- Remove stop</li>
    <li>&#x203A; Next stop</li>
    <li>&#x2039; Previous stop</li>
  </ul>
  <p>The dropdown menu that says (0, 0, 0) at 0% is a list of gradient stops.</p>
  <p>The number box beside it shows the position of the currently selected stop.</p>
  <p>The stop colour box shows the colour of the currently selected stop. You can set a new colour by clicking on this box.</p>
  <p>The currently selected gradient stop will pulsate.</p>
  <p>Below the gradient itself, you can see a preview of what the gradient will look like if applied to the selected colour range.</p>
  <p>Apply the gradient to the selected colour range, or all of the colours in the palette by clicking "Apply".</p>
  <p>Reverse the positions of the stops in the gradient by clicking on the Reverse button</p>
  <p>Export the current gradient to a JSON file by clicking on Export</p>
  <p>Import the gradient from a gradient JSON file by clicking on Import</p>
  <h2>Credits</h2>
  <p>Programmed by Kevin "Talon1024" Caccamo</p>
  <p><a href="https://angular.io">Angular</a> by Google</p>
  <p>Special thanks to Virgilio "Ozymandias81" Virzo for his help with finding and fixing bugs!</p>
  <h2>Changelog</h2>
  <h3>Youtube preview video → v0.5 public beta</h3>
  <p>Re-organized UI elements.</p>
  <p>Made palette view more compact by decreasing the size of individual colours.</p>
  <p>Made buttons more compact by changing them to &lt;span&gt; elements.</p>
  <p>Made other UI elements, such as inputs and colour selectors more compact.</p>
  <p>Made all sub-components widgets.</p>
  <p>Removed "Colour ranges", "Translations", and "Selected colour" widgets.</p>
  <p>Added modal widgets.</p>
  <p>Initial release.</p>
  <h3>v0.5 → v0.6 public beta</h3>
  <p>Added "Message log" widget to display error/warning messages.</p>
  <p>Added WAD support.</p>
  <p>Added "Selected colour" widget that allows users to change individual colours in the palette.</p>
  <p>Made "Saturate" button work (Palette operations).</p>
  <p>Added "Copy Selection" and "Paste" buttons (Palette operations).</p>
  <p>Added "Use red channel from gradient as factor" checkbox (Palette operations).</p>
  <p>Added "Reverse", "Import", and "Export" buttons (Gradient editor).</p>
  <p>Upgraded to Angular 6.</p>
  <h3>v0.6 → 0.7</h3>
  <p>Re-wrote much of Paledit's internals for better adherence to Model-View-Controller design philosophy and better separation of concerns.</p>
  <p>Fixed bugs with selected colour widget</p>
  <p>Added interval selection feature, usable by Shift-Ctrl-clicking on a colour</p>
  <p>Removed "Save Colourmap" button, since it did nothing</p>
</app-modal>
