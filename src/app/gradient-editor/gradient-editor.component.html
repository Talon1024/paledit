<div class="widget" *ngIf="gradient">
  <h3>
    Gradient Editor
  </h3>
  <div class="gradient-root">
    <div class="gradient" [style.background-image]="gradientStyle()">
      <div *ngFor="let stop of gradient.stops; let i = index"
        class="gradient-stop"
        [class.selected]="i === curStopIdx"
        [style.left]="stopPositionStyle(stop)"
        (mousedown)="handleStopClickDown($event, i)"></div>
    </div>
    <div class="gradient-preview" *ngIf="range">
      <div *ngFor="let pidx of range.getIndices()" [style.background-color]="previewColourStyle(pidx)"></div>
    </div>
  </div>
  <div class="sbs">
    <div class="">
      <span class="button" (click)="addStop()">+</span>
      <span class="button" (click)="removeStop()">-</span>
      <select #stopList *ngIf="gradient.stops" (change)="setCurStopIdx(stopList.selectedIndex)" class="widget">
        <option *ngFor="let stop of gradient.stops; let i = index" [selected]="i === curStopIdx">{{stop}}</option>
      </select>
      <input #stopPos class="narrowInput widget" type="number" step=".01" [value]="curStopPos" (change)="handleStopPosChange(stopPos.value)" min="0" max="1">
      <span class="button" (click)="prevStop()">‹</span>
      <span class="button" (click)="nextStop()">›</span>
    </div>
    <label>
      Stop Colour: <span [colorPicker]="curColour" cpPosition="top" (colorPickerChange)="setCurStopColor($event)"
        class="colourPick widget" [style.background-color]="curColour"></span>
    </label>
  </div>
  <div class="operations">
    <span class="button" (click)="applyGradient()">Apply</span>
  </div>
</div>
